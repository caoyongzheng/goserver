webpackJsonp([31],{9:function(t,r){"use strict";function e(t,r,e){var o=n(t,r,e);return o?(t.useProgram(o),t.program=o,!0):(console.log("Failed to create program"),!1)}function n(t,r,e){var n=o(t,t.VERTEX_SHADER,r),a=o(t,t.FRAGMENT_SHADER,e);if(!n||!a)return null;var i=t.createProgram();if(!i)return null;t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i);var u=t.getProgramParameter(i,t.LINK_STATUS);if(!u){var l=t.getProgramInfoLog(i);return console.log("Failed to link program: "+l),t.deleteProgram(i),t.deleteShader(a),t.deleteShader(n),null}return i}function o(t,r,e){var n=t.createShader(r);if(null==n)return console.log("unable to create shader"),null;t.shaderSource(n,e),t.compileShader(n);var o=t.getShaderParameter(n,t.COMPILE_STATUS);if(!o){var a=t.getShaderInfoLog(n);return console.log("Failed to compile shader: "+a),t.deleteShader(n),null}return n}Object.defineProperty(r,"__esModule",{value:!0}),r.initShaders=e},14:function(t,r){"use strict";function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var n=function a(t){e(this,a),o.call(this),this.matrix=t||a.unitMatrix4()};n.inverseOf=function(t){var r=void 0,e=void 0,n=void 0,o=void 0,a=void 0;if(e=t.matrix,n=new Float32Array(16),o=new Float32Array(16),o[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],o[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],o[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],o[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],o[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],o[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],o[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],o[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],o[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],o[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],o[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],o[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],o[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],o[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],o[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],o[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],a=e[0]*o[0]+e[1]*o[4]+e[2]*o[8]+e[3]*o[12],0!==a){for(a=1/a,r=0;r<16;r++)n[r]=o[r]*a;return n}},n.perspectiveMatrix=function(t,r,e,n){var o=void 0,a=void 0,i=void 0,u=void 0;if(e===n||0===r)throw"null frustum";if(e<=0)throw"near <= 0";if(n<=0)throw"far <= 0";if(t=Math.PI*t/180/2,i=Math.sin(t),0===i)throw"null frustum";return a=1/(n-e),u=Math.cos(t)/i,o=new Float32Array(16),o[0]=u/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-(n+e)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*e*n*a,o[15]=0,o},n.orthoMatrix=function(t,r,e,n,o,a){var i=void 0,u=void 0,l=void 0,f=void 0;if(t===r||e===n||o===a)throw"null frustum";return u=1/(r-t),l=1/(n-e),f=1/(a-o),i=new Float32Array(16),i[0]=2*u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-2*f,i[11]=0,i[12]=-(r+t)*u,i[13]=-(n+e)*l,i[14]=-(a+o)*f,i[15]=1,i},n.viewMatrix=function(t,r,e,o,a,i,u,l,f){var c=void 0,s=void 0,v=void 0,m=void 0,h=void 0,d=void 0,y=void 0,x=void 0,p=void 0,g=void 0,M=void 0;c=o-t,s=a-r,v=i-e,m=1/Math.sqrt(c*c+s*s+v*v),c*=m,s*=m,v*=m,h=s*f-v*l,d=v*u-c*f,y=c*l-s*u,x=1/Math.sqrt(h*h+d*d+y*y),h*=x,d*=x,y*=x,p=d*v-y*s,g=y*c-h*v,M=h*s-d*c;var _=new Float32Array(16);return _[0]=h,_[1]=p,_[2]=-c,_[3]=0,_[4]=d,_[5]=g,_[6]=-s,_[7]=0,_[8]=y,_[9]=M,_[10]=-v,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,n.multiply(_,n.translateMatrix(-t,-r,-e))},n.rotateMatrix=function(t,r,e,o){var a=Math.PI*t/180,i=Math.sin(a),u=Math.cos(a);if(0!==r&&0===e&&0===o)return r<0&&(i=-i),n.rotateXMatrix(i,u);if(0===r&&0!==e&&0===o)return e<0&&(i=-i),n.rotateYMatrix(i,u);if(0===r&&0===e&&0!==o)return o<0&&(i=-i),n.rotateZMatrix(i,u);var l=new Float32Array(16);return len=Math.sqrt(r*r+e*e+o*o),1!==len&&(rlen=1/len,r*=rlen,e*=rlen,o*=rlen),nc=1-u,xy=r*e,yz=e*o,zx=o*r,xs=r*i,ys=e*i,zs=o*i,l[0]=r*r*nc+u,l[1]=xy*nc+zs,l[2]=zx*nc-ys,l[3]=0,l[4]=xy*nc-zs,l[5]=e*e*nc+u,l[6]=yz*nc+xs,l[7]=0,l[8]=zx*nc+ys,l[9]=yz*nc-xs,l[10]=o*o*nc+u,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},n.translateMatrix=function(t,r,e){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,r,e,1])},n.scaleMatrix=function(t,r,e){return new Float32Array([t,0,0,0,0,r,0,0,0,0,e,0,0,0,0,1])},n.unitMatrix4=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},n.rotateXMatrix=function(t,r){return new Float32Array([1,0,0,0,0,r,t,0,0,-t,r,0,0,0,0,1])},n.rotateYMatrix=function(t,r){return new Float32Array([r,0,-t,0,0,1,0,0,t,0,r,0,0,0,0,1])},n.rotateZMatrix=function(t,r){return new Float32Array([r,t,0,0,-t,r,0,0,0,0,1,0,0,0,0,1])},n.add=function(t,r){var e=t.length,n=r.length;if(e!=n)throw"矩阵1和矩阵2长度不一致";for(var o=new Float32Array(e),a=0;a<e;a++)o[a]=t[a]+r[a];return o},n.subtract=function(t,r){for(var e=new Float32Array(16),n=0;n<16;n++)e[n]=t[n]-r[n];return e},n.multiply=function(t,r){var e=new Float32Array(16);return e[0]=t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],e[4]=t[0]*r[4]+t[4]*r[5]+t[8]*r[6]+t[12]*r[7],e[8]=t[0]*r[8]+t[4]*r[9]+t[8]*r[10]+t[12]*r[11],e[12]=t[0]*r[12]+t[4]*r[13]+t[8]*r[14]+t[12]*r[15],e[1]=t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],e[5]=t[1]*r[4]+t[5]*r[5]+t[9]*r[6]+t[13]*r[7],e[9]=t[1]*r[8]+t[5]*r[9]+t[9]*r[10]+t[13]*r[11],e[13]=t[1]*r[12]+t[5]*r[13]+t[9]*r[14]+t[13]*r[15],e[2]=t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],e[6]=t[2]*r[4]+t[6]*r[5]+t[10]*r[6]+t[14]*r[7],e[10]=t[2]*r[8]+t[6]*r[9]+t[10]*r[10]+t[14]*r[11],e[14]=t[2]*r[12]+t[6]*r[13]+t[10]*r[14]+t[14]*r[15],e[3]=t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3],e[7]=t[3]*r[4]+t[7]*r[5]+t[11]*r[6]+t[15]*r[7],e[11]=t[3]*r[8]+t[7]*r[9]+t[11]*r[10]+t[15]*r[11],e[15]=t[3]*r[12]+t[7]*r[13]+t[11]*r[14]+t[15]*r[15],e};var o=function(){var t=this;this.init=function(r){return t.matrix=r||n.unitMatrix4(),t},this.multiply=function(r){t.matrix=n.multiply(t.matrix,r)},this.rotate=function(r,e,o,a){return t.matrix=n.multiply(n.rotateMatrix(r,e,o,a),t.matrix),t},this.rotate4=function(r,e,n){return t.translate(-n.x,-n.y,-n.z),t.rotate(r,e.x,e.y,e.z),t.translate(n.x,n.y,n.z),t},this.translate=function(r,e,o){return t.matrix=n.multiply(n.translateMatrix(r,e,o),t.matrix),t},this.scale=function(r,e,o){return t.matrix=n.multiply(n.scaleMatrix(r,e,o),t.matrix),t},this.view=function(r,e,o,a,i,u,l,f,c){return t.matrix=n.multiply(n.viewMatrix(r,e,o,a,i,u,l,f,c),t.matrix),t},this.ortho=function(r,e,o,a,i,u){return t.matrix=n.multiply(n.orthoMatrix(r,e,o,a,i,u),t.matrix),t},this.perspective=function(r,e,o,a){return t.matrix=n.multiply(n.perspectiveMatrix(r,e,o,a),t.matrix),t},this.transpose=function(){var r=void 0,e=void 0;return r=t.matrix,e=r[1],r[1]=r[4],r[4]=e,e=r[2],r[2]=r[8],r[8]=e,e=r[3],r[3]=r[12],r[12]=e,e=r[6],r[6]=r[9],r[9]=e,e=r[7],r[7]=r[13],r[13]=e,e=r[11],r[11]=r[14],r[14]=e,t},this.setOrtho=function(r,e,o,a,i,u){return t.matrix=n.orthoMatrix(r,e,o,a,i,u),t},this.setRotate=function(r,e,o,a){return t.matrix=n.rotateMatrix(r,e,o,a),t},this.setTranslate=function(r,e,o){return t.matrix=n.translateMatrix(r,e,o),t},this.setScale=function(r,e,o){return t.matrix=n.scaleMatrix(r,e,o),t},this.setView=function(r,e,o,a,i,u,l,f,c){return t.matrix=n.viewMatrix(r,e,o,a,i,u,l,f,c),t},this.setPerspective=function(r,e,o,a){return t.matrix=n.perspectiveMatrix(r,e,o,a),t},this.setInverseOf=function(r){var e=n.inverseOf(r);return e&&(t.matrix=e),t}};t.exports=n},100:function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Vector4=r.Vector3=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=e(7),u=n(i),l=(r.Vector3=function f(t){o(this,f),l.call(this);var r=new Float32Array(3);t&&u["default"].isArray(t)&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),this.elements=r},function(){var t=this;this.normalize=function(){var r=t.elements,e=r[0],n=r[1],o=r[2],a=Math.sqrt(e*e+n*n+o*o);return a?1==a?t:(a=1/a,r[0]=e*a,r[1]=n*a,r[2]=o*a,t):(r[0]=0,r[1]=0,r[2]=0,t)}});r.Vector4=function c(t){o(this,c);var r=new Float32Array(4);opt_src&&"object"===("undefined"==typeof opt_src?"undefined":a(opt_src))&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]),this.elements=r}},237:function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function i(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}var u=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),l=e(1),f=n(l),c=e(12),s=n(c),v=e(9),m=e(100),h=e(14),d=n(h),y="\n    attribute vec4 a_Position;\n    attribute vec4 a_Color;\n    attribute vec4 a_Normal;\n    uniform mat4 u_MvpMatrix;\n    uniform mat4 uMormalMatrix;\n    uniform vec3 u_LightColor;\n    uniform vec3 u_LightDirection;\n    uniform vec3 u_AmbientLight;\n    varying vec4 v_Color;\n    void main(){\n        gl_Position = u_MvpMatrix * a_Position;\n        vec3 normal = normalize(vec3(uMormalMatrix * a_Normal));\n        float nDotL = max(dot(u_LightDirection, normal), 0.0);\n        vec3 diffuse = u_LightColor * a_Color.rgb * nDotL;\n        vec3 ambient = u_AmbientLight * a_Color.rgb;\n        v_Color = vec4(diffuse + ambient, a_Color.a);\n    }\n",x="\n    precision mediump float;\n    varying vec4 v_Color;\n    void main(){\n        gl_FragColor = v_Color;\n    }\n",p=function(t){function r(){var t,e,n,i;o(this,r);for(var u=arguments.length,l=Array(u),f=0;f<u;f++)l[f]=arguments[f];return e=n=a(this,(t=Object.getPrototypeOf(r)).call.apply(t,[this].concat(l))),n.initVertexBuffers=function(t){var r=new Float32Array([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1]),e=new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0]),o=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1]),a=new Uint8Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),i=t.createBuffer();return i&&n.initArrayBuffer(t,r,3,t.FLOAT,"a_Position")&&n.initArrayBuffer(t,e,3,t.FLOAT,"a_Color")&&n.initArrayBuffer(t,o,3,t.FLOAT,"a_Normal")?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW),a.length):-1},n.initArrayBuffer=function(t,r,e,n,o){var a=t.createBuffer();if(!a)return console.log("Failed to create the buffer object"),!1;t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW);var i=t.getAttribLocation(t.program,o);return i<0?(console.log("Failed to get the storage location of "+o),!1):(t.vertexAttribPointer(i,e,n,!1,0,0),t.enableVertexAttribArray(i),!0)},i=e,a(n,i)}return i(r,t),u(r,[{key:"componentDidMount",value:function(){try{var t=s["default"].findDOMNode(this.refs.canvas);t.width=500,t.height=500;var r=t.getContext("webgl");if(!(0,v.initShaders)(r,y,x))return void console.log("Faild to init Shaders");var e=this.initVertexBuffers(r);if(e<0)return void console.log("Failed to set the vertex information");r.clearColor(0,0,0,1),r.enable(r.DEPTH_TEST);var n=r.getUniformLocation(r.program,"u_MvpMatrix"),o=r.getUniformLocation(r.program,"u_LightColor"),a=r.getUniformLocation(r.program,"u_LightDirection"),i=r.getUniformLocation(r.program,"u_AmbientLight"),u=r.getUniformLocation(r.program,"uMormalMatrix");if(!(n&&o&&a&&i&&u))return void console.log("Failed to get the storage location");r.uniform3f(o,1,1,1);var l=new m.Vector3([.5,3,4]);l.normalize(),r.uniform3fv(a,l.elements),r.uniform3f(i,.2,.2,.2);var f=new d["default"];f.setRotate(90,0,0,1),f.translate(0,.9,0);var c=new d["default"];c.setInverseOf(f),c.transpose(),r.uniformMatrix4fv(u,!1,c.matrix);var h=new d["default"];h.setView(3,3,7,0,0,0,0,1,0).perspective(30,t.width/t.height,1,100).multiply(f.matrix),r.uniformMatrix4fv(n,!1,h.matrix),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,e,r.UNSIGNED_BYTE,0)}catch(p){console.log(p)}}},{key:"render",value:function(){return f["default"].createElement("figure",null,f["default"].createElement("figcaption",null,"光照平移旋转立方体"),f["default"].createElement("canvas",{ref:"canvas"},"your current brower don't support canvas,please change another one"))}}]),r}(f["default"].Component);t.exports=p}});